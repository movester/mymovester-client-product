(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[434],{1384:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return I}});var i=n(9499),r=n(29),s=n(6687),a=n(7794),l=n.n(a),o=n(508),c=n(8862),u=n(769),d=n(9377),f=n(9026),p=n(4937),x=n(471),h=n(7294),j=n(8345),g=n(1001),Z=n(6893),y=n(9651),m=n(1163),v=n(9105),w=n(6036),b=n(8228),C=function(){var e=(0,m.useRouter)();return(0,b.D)({mutationFn:function(e){return fetch("/stretchings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},onSuccess:function(t){e.push("/stretching")},onError:function(e){console.log(e)}})},O=n(9056),D=n(5948),P=n(3433),S=n(5893);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach(function(t){(0,i.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var I=function(){var e,t=(0,h.useState)(""),n=t[0],i=t[1],a=(0,h.useState)(void 0),o=a[0],b=a[1],_=(0,h.useState)(void 0),I=_[0],q=_[1],F=(0,h.useState)(void 0),L=F[0],A=F[1],U=(0,h.useState)(void 0),B=U[0],T=U[1],K=(0,h.useState)(void 0),M=K[0],W=K[1],X=(0,h.useState)(""),H=X[0],J=X[1],Y=(0,h.useState)(void 0),G=Y[0],Q=Y[1],$=(0,h.useState)(void 0),ee=$[0],et=$[1],en=(0,h.useState)([{order:1,detail:""}]),ei=en[0],er=en[1],es=(0,h.useState)(!1),ea=es[0],el=es[1],eo=(0,h.useState)([]),ec=eo[0],eu=eo[1],ed=(0,h.useState)([]),ef=ed[0],ep=ed[1],ex=(0,h.useState)(!1),eh=ex[0],ej=ex[1],eg=(0,h.useState)([]),eZ=eg[0],ey=eg[1],em=(0,h.useState)([]),ev=em[0],ew=em[1],eb=(0,h.useState)([]),eC=eb[0],eO=eb[1],eD=(0,h.useState)(!1),eP=eD[0],eS=eD[1],e_=(0,m.useRouter)(),ek=(0,h.useRef)();(0,h.useEffect)(function(){eS(!0)},[]);var eI=C().mutate,ez=(0,O.Z)(),eN=ez.mutateAsync;ez.data,ez.isLoading,ez.isSuccess;var eE=function(e){var t,n,i=null===(t=e.source)||void 0===t?void 0:t.index,r=null===(n=e.destination)||void 0===n?void 0:n.index;eO(function(e){return i<=r?(e.splice(r+1,0,e[i]),e.splice(i,1),(0,s.Z)(e)):(e.splice(r-1,0,e[i]),e.splice(i+1,1),(0,s.Z)(e))}),ew(function(e){return i<=r?(e.splice(r+1,0,e[i]),e.splice(i,1),(0,s.Z)(e)):(e.splice(r-1,0,e[i]),e.splice(i+1,1),(0,s.Z)(e))})},eV=(e=(0,r.Z)(l().mark(function e(){var t;return l().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!(ev.length>0)){e.next=4;break}return e.next=4,Promise.all(ev.map(function(e){return eN(e).then(function(e){return t.push(e.filePath)})})).then(function(){eI({title:n,mainCategory:o.id,subCategory:I.id,effectList:[L.id,B.id,M.id],imageList:[].concat(t),techniqueList:(0,s.Z)(ei.map(function(e){return e.detail})),collect:Number(G),set:Number(ee),precautionList:(0,s.Z)(ef.map(function(e){return e.detail})),videoUrl:H})});case 4:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)}),eR=function(e){ec.includes(e)?eu(function(t){return t.filter(function(t){return t!==e})}):eu(function(t){return[].concat((0,s.Z)(t),[e])})},eq=function(e){eZ.includes(e)?ey(function(t){return t.filter(function(t){return t!==e})}):ey(function(t){return[].concat((0,s.Z)(t),[e])})};return(0,S.jsxs)(z,{children:[(0,S.jsx)(p.Z,{}),(0,S.jsxs)(N,{children:[(0,S.jsx)(d.Z,{children:(0,S.jsx)(E,{children:(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:4,children:[(0,S.jsx)(u.Z,{variants:"heading2",children:"스트레칭"}),(0,S.jsx)(u.Z,{variants:"heading2",children:">"}),(0,S.jsx)(u.Z,{variants:"heading2",children:"스트레칭 등록"})]})})}),(0,S.jsx)(d.Z,{children:(0,S.jsx)(D.Z5,{onDragEnd:eE,children:(0,S.jsx)(c.Z,{display:"flex",flexDirection:"column",gap:120,padding:32,children:(0,S.jsxs)(c.Z,{gap:24,display:"flex",flexDirection:"column",width:"100%",children:[(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{required:!0,children:"제목"}),(0,S.jsx)(x.Z,{value:n,setValue:function(e){return i(e.target.value)}})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{required:!0,children:"부위"}),(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"start",gap:8,children:[(0,S.jsx)(j.Z,{size:"sm",list:w.or,value:o,setValue:b,label:"대분류"}),(0,S.jsx)(j.Z,{size:"sm",disabled:!o,list:(null==o?void 0:o.id)==="UPPER_BODY"?w.pz:w.KH,value:I,setValue:q,label:"중분류"})]})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{required:!0,children:"효과"}),(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"start",gap:8,children:[(0,S.jsx)(j.Z,{size:"sm",list:w.sA,value:L,setValue:A,label:"효과1"}),(0,S.jsx)(j.Z,{size:"sm",list:w.sA,value:B,setValue:T,label:"효과2"}),(0,S.jsx)(j.Z,{size:"sm",list:w.sA,value:M,setValue:W,label:"효과3"})]})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{required:!0,caption:"최대 2장",children:"이미지"}),eP&&(0,S.jsx)(D.bK,{droppableId:"post-image",children:function(e){return(0,S.jsx)(R,k(k({ref:e.innerRef},e.droppableProps),{},{onDragEnd:eE,children:eC&&eC.length>0&&eC.map(function(e,t){return(0,S.jsx)(P.Z,{imageUrl:e,idx:t,setImageFormatData:ew,setPreviewFile:eO},"upload-img-".concat(e))})}))}}),(0,S.jsxs)(c.Z,{width:80,children:[(0,S.jsx)(V,{htmlFor:"image-upload",children:"+추가"}),(0,S.jsx)("input",{type:"file",ref:ek,id:"image-upload",onChange:function(e){var t=new FormData;t.append("file",e.target.files[0]);var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){return eO(function(e){return[].concat((0,s.Z)(e),[n.result])})},ew(function(e){return[].concat((0,s.Z)(e),[t])})},style:{display:"none"}})]})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",height:"100%",children:[(0,S.jsx)(v.Z,{required:!0,children:"스트레칭 방법 및 순서"}),(0,S.jsx)(c.Z,{border:" 1px solid ".concat(f.O.g000),display:"flex",flexDirection:"column",borderRadius:8,overflow:"hidden",gap:1,backgroundColor:f.O.g000,children:ei.map(function(e){return(0,S.jsx)(y.Z,{order:e.order,deleteMode:ea,onClickDelete:eR,children:(0,S.jsx)(x.Z,{value:e.detail,setValue:function(t){return er(function(n){return n.map(function(n){return n.order===e.order?k(k({},n),{},{detail:t.target.value}):n})})},invisible:!0})},"stretching-oreder-".concat(e.order))})}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"row",justifyContent:"start",gap:4,children:[!ea&&(0,S.jsx)(c.Z,{width:80,children:(0,S.jsx)(g.Z,{size:"xs",variants:"secondary",onClick:function(){return er(function(e){return[].concat((0,s.Z)(e),[{order:e.at(-1).order+1,detail:""}])})},children:"+추가"})}),(0,S.jsx)(c.Z,{width:80,children:(0,S.jsx)(g.Z,{size:"xs",variants:"primary",onClick:function(){if(el(function(e){return!e}),ea&&ei.length>1){var e=(0,s.Z)(ei).filter(function(e){return e.order!==(0,s.Z)(ec).filter(function(t){return t===e.order})[0]});e.map(function(e,t){return e.order=t+1}),er((0,s.Z)(e))}},children:ea?"확인":"삭제"})})]})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{required:!0,children:"권장 횟수"}),(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,S.jsx)(c.Z,{width:120,children:(0,S.jsx)(x.Z,{value:G,setValue:function(e){return Q(e.target.value)}})}),(0,S.jsx)(u.Z,{variants:"body1",children:"회"})]}),(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,S.jsx)(c.Z,{width:120,children:(0,S.jsx)(x.Z,{value:ee,setValue:function(e){return et(e.target.value)}})}),(0,S.jsx)(u.Z,{variants:"body1",children:"세트"})]})]})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{children:"주의할 점"}),ef.length>0&&(0,S.jsx)(c.Z,{border:" 1px solid ".concat(f.O.g000),display:"flex",flexDirection:"column",borderRadius:8,overflow:"hidden",gap:1,backgroundColor:f.O.g000,children:ef.map(function(e){return(0,S.jsx)(y.Z,{order:e.order,deleteMode:eh,onClickDelete:eq,children:(0,S.jsx)(x.Z,{value:e.detail,setValue:function(t){return ep(function(n){return n.map(function(n){return n.order===e.order?k(k({},n),{},{detail:t.target.value}):n})})},invisible:!0})},"caution-oreder-".concat(e.order))})}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"row",justifyContent:"start",gap:4,children:[!eh&&(0,S.jsx)(c.Z,{width:80,children:(0,S.jsx)(g.Z,{size:"xs",variants:"secondary",onClick:function(){return ep(function(e){return[].concat((0,s.Z)(e),[{order:e.at(-1)?e.at(-1).order+1:1,detail:""}])})},children:"+추가"})}),(0,S.jsx)(c.Z,{width:80,children:(0,S.jsx)(g.Z,{size:"xs",variants:"primary",onClick:function(){if(ej(function(e){return!e}),eh){var e=(0,s.Z)(ef).filter(function(e){return e.order!==(0,s.Z)(eZ).filter(function(t){return t===e.order})[0]});e.map(function(e,t){return e.order=t+1}),ep((0,s.Z)(e))}},children:eh?"확인":"삭제"})})]}),(0,S.jsxs)(c.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,S.jsx)(v.Z,{children:"참고영상 링크"}),(0,S.jsxs)(c.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,S.jsx)(Z.eR7,{}),(0,S.jsx)(c.Z,{width:"100%",children:(0,S.jsx)(x.Z,{value:H,setValue:function(e){return J(e.target.value)}})})]})]})]}),(0,S.jsx)(c.Z,{display:"flex",justifyContent:"center",children:(0,S.jsxs)(c.Z,{display:"flex",gap:8,width:320,justifyContent:"center",children:[(0,S.jsx)(g.Z,{size:"md",variants:"secondary",onClick:function(){return e_.push("/stretching")},children:"취소"}),(0,S.jsx)(g.Z,{size:"md",variants:"primary",onClick:eV,children:"등록"})]})})]})})})})]})]})},z=o.ZP.div.withConfig({displayName:"post__PageWrapper",componentId:"sc-1n2uvxi-0"})(["display:flex;background-color:",";height:100%;"],f.O.f100),N=o.ZP.div.withConfig({displayName:"post__ContentWrapper",componentId:"sc-1n2uvxi-1"})(["padding:16px;width:100%;height:100%;display:flex;flex-direction:column;gap:32px;"]),E=o.ZP.div.withConfig({displayName:"post__BreadCrumb",componentId:"sc-1n2uvxi-2"})(["display:flex;justify-content:start;align-items:center;gap:8px;padding:16px 16px 16px 32px;"]),V=o.ZP.label.withConfig({displayName:"post__ImageUploadButton",componentId:"sc-1n2uvxi-3"})(["display:flex;justify-content:center;align-items:center;height:32px;width:80px;font-size:12px;color:",";border:2px solid ",";border-radius:8px;font-weight:700;"],f.O.vividPrimaryColor,f.O.vividPrimaryColor),R=o.ZP.div.withConfig({displayName:"post__DropBox",componentId:"sc-1n2uvxi-4"})(["display:grid;grid-template-columns:repeat(2,350px);gap:16px;"])},8522:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stretching/post",function(){return n(1384)}])}},function(e){e.O(0,[228,617,630,170,915,518,774,888,179],function(){return e(e.s=8522)}),_N_E=e.O()}]);