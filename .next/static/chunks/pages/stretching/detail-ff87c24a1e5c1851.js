(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[780],{6598:function(e,t,n){"use strict";n.d(t,{D_:function(){return r},fC:function(){return i},iW:function(){return s}});var i={UPPER_BODY:"상체",LOWER_BODY:"하체"},r={NECK:"목/가슴/어깨",ARM:"팔/손/손목",BACK:"등/몸통",HIP_JOINT:"고관절/둔근",CALF:"종아리/발목/발",KNEE:"무릎/허벅지"},s={RELIEF_PAIN:"통증완화",IMPROVE_POSTURE:"자세개선",RELAX_MUSCLE:"근육이완",BLOOD_CIRCULATION:"혈액순환",RELIEF_TURTLE_NECK:"거북목 완화",RELIEF_ROUND_SHOULDER:"라운드숄더 완화"}},3311:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return A}});var i=n(7294),r=n(508),s=n(9026),a=n(9377),l=n(769),o=n(8862),c=n(4937),d=n(1001),u=n(1163),f=n(5893),h=function(e){var t=e.color;return(0,f.jsx)(x,{style:{backgroundColor:"".concat(void 0===t?"#C4C4C4":t)}})},x=r.zo.div.withConfig({displayName:"Divder__Box",componentId:"sc-1rm3e8x-0"})(["height:1px;"]),p=function(e){var t=e.order,n=e.children;return(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"row",gap:1,backgroundColor:s.O.g000,width:"100%",alignItems:"center",height:48,children:[(0,f.jsx)(o.Z,{backgroundColor:s.O.f000,height:"100%",display:"flex",alignItems:"center",justifyContent:"center",width:44,children:(0,f.jsx)(l.Z,{variants:"body1",children:t})}),(0,f.jsx)(o.Z,{backgroundColor:s.O.f000,width:"100%",height:"100%",alignItems:"center",display:"flex",padding:16,children:n})]})},g=n(6598),j=function(e){var t=e.data;return(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:56,padding:32,height:"100%",children:[(0,f.jsx)(l.Z,{variants:"heading1",children:t.title}),(0,f.jsx)(h,{}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"부위"}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",children:[(0,f.jsx)(l.Z,{variants:"body1",children:g.fC[t.mainCategory]}),(0,f.jsx)(l.Z,{variants:"body1",children:g.D_[t.subCategory]})]})]}),(0,f.jsxs)(o.Z,{children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"효과"}),(0,f.jsx)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",children:t.effectList.map(function(e,t){return(0,f.jsxs)(l.Z,{variants:"body1",children:[g.iW[e],","]},"detail-effect-".concat(e,"-").concat(t))})})]}),(0,f.jsx)(o.Z,{display:"grid",gridTemplateColumns:"repeat(2,350px)",gap:16,children:t.imageList.map(function(e,n){return(0,f.jsx)("img",{src:e},"img-detail-".concat(t.id,"-").concat(n))})}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"start",gap:16,children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"스트레칭 방법 및 순서"}),(0,f.jsx)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",border:" 1px solid ".concat(s.O.g000),borderRadius:8,width:"100%",overflow:"hidden",flexDirection:"column",backgroundColor:s.O.g000,gap:1,children:t.techniqueList.map(function(e,t){return(0,f.jsx)(p,{order:t+1,children:(0,f.jsx)(l.Z,{variants:"body1",children:e})},"technique-list-".concat(e))})})]}),(0,f.jsx)(a.Z,{children:(0,f.jsxs)(o.Z,{backgroundColor:s.O.f200,padding:16,borderRadius:8,children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"✨ 권장 횟수"}),(0,f.jsx)(l.Z,{variants:"body1",children:"는 "}),(0,f.jsxs)(l.Z,{variants:"heading1",children:[t.collect,"회 ",t.set,"세트"]}),(0,f.jsx)(l.Z,{variants:"body1",children:"입니다."})]})}),t.precautionList.length>0&&(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"start",gap:16,children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"주의 사항"}),(0,f.jsx)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",border:" 1px solid ".concat(s.O.g000),borderRadius:8,width:"100%",overflow:"hidden",flexDirection:"column",backgroundColor:s.O.g000,gap:1,children:t.precautionList.map(function(e,t){return(0,f.jsx)(p,{order:t+1,children:(0,f.jsx)(l.Z,{variants:"body1",children:e})},"technique-list-".concat(e))})})]}),t.videoUrl&&(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",alignItems:"start",justifyContent:"start",gap:16,height:"auto",children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"참고영상"}),(0,f.jsx)(o.Z,{display:"flex",justifyContent:"center",width:"100%",children:(0,f.jsx)("iframe",{width:550,height:400,allowFullScreen:!0,src:t.videoUrl})})]})]})},m=n(9499),y=n(29),Z=n(6687),v=n(7794),C=n.n(v),b=n(6893),w=n(8345),D=n(471),O=n(9651),I=n(9105),_=n(6036),E=n(8228),L=n(3433),P=n(5948),k=n(9056);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach(function(t){(0,m.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var N=function(e){var t,n=e.data,r=(0,i.useState)(n.title),a=r[0],c=r[1],h=(0,i.useState)({id:n.mainCategory,name:g.fC[n.mainCategory]}),x=h[0],p=h[1],j=(0,i.useState)({id:n.subCategory,name:g.D_[n.subCategory]}),m=j[0],v=j[1],R=(0,i.useState)({id:n.effectList[0],name:g.iW[n.effectList[0]]}),N=R[0],U=R[1],F=(0,i.useState)({id:n.effectList[1],name:g.iW[n.effectList[1]]}),V=F[0],A=F[1],T=(0,i.useState)({id:n.effectList[2],name:g.iW[n.effectList[2]]}),B=T[0],M=T[1],W=(0,i.useState)(n.videoUrl),K=W[0],H=W[1],X=(0,i.useState)(n.collect),Y=X[0],J=X[1],G=(0,i.useState)(n.set),Q=G[0],$=G[1],ee=(0,i.useMemo)(function(){return n.techniqueList.map(function(e,t){return{order:t+1,detail:e}})},[n]),et=(0,i.useMemo)(function(){return n.precautionList.map(function(e,t){return{order:t+1,detail:e}})},[n]),en=(0,i.useRef)(),ei=(0,i.useState)(ee),er=ei[0],es=ei[1],ea=(0,i.useState)(!1),el=ea[0],eo=ea[1],ec=(0,i.useState)([]),ed=ec[0],eu=ec[1],ef=(0,i.useState)(et),eh=ef[0],ex=ef[1],ep=(0,i.useState)(!1),eg=ep[0],ej=ep[1],em=(0,i.useState)([]),ey=em[0],eZ=em[1],ev=(0,i.useState)((0,Z.Z)(n.imageList)),eC=ev[0],eb=ev[1],ew=(0,i.useState)((0,Z.Z)(n.imageList)),eD=ew[0],eO=ew[1],eI=(0,i.useState)(!1),e_=eI[0],eE=eI[1];(0,i.useEffect)(function(){eE(!0)},[]);var eL=(0,E.D)({mutationFn:function(e){return fetch("/api/stretchings/".concat(e.pageId),{method:"PUT",body:JSON.stringify(e.formattedData),headers:{"Content-Type":"application/json"}})},onError:function(e){console.log(e)}}).mutateAsync,eP=(0,k.Z)().mutateAsync;(0,u.useRouter)();var ek=function(e){var t,n,i=null===(t=e.source)||void 0===t?void 0:t.index,r=null===(n=e.destination)||void 0===n?void 0:n.index;eO(function(e){return i<=r?(e.splice(r+1,0,e[i]),e.splice(i,1)):(e.splice(r-1,0,e[i]),e.splice(i+1,1)),(0,Z.Z)(e)}),eb(function(e){return i<=r?(e.splice(r+1,0,e[i]),e.splice(i,1)):(e.splice(r-1,0,e[i]),e.splice(i+1,1)),(0,Z.Z)(e)})},eR=(t=(0,y.Z)(C().mark(function e(){var t;return C().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=[],!(eC.length>0)){e.next=4;break}return e.next=4,Promise.all(eC.map(function(e){if("string"!=typeof e)return eP(e).then(function(e){return t.push(e.filePath)});t.push(e)})).then(function(){var e={title:a,mainCategory:x.id,subCategory:m.id,effectList:[N.id,V.id,B.id],imageList:[].concat(t),techniqueList:(0,Z.Z)(er.map(function(e){return e.detail})),collect:Number(Y),set:Number(Q),precautionList:(0,Z.Z)(eh.map(function(e){return e.detail})),videoUrl:K};eL({pageId:Number(n.id),formattedData:e})});case 4:case"end":return e.stop()}},e)})),function(){return t.apply(this,arguments)}),eS=function(e){ed.includes(e)?eu(function(t){return t.filter(function(t){return t!==e})}):eu(function(t){return[].concat((0,Z.Z)(t),[e])})},eN=function(e){ey.includes(e)?eZ(function(t){return t.filter(function(t){return t!==e})}):eZ(function(t){return[].concat((0,Z.Z)(t),[e])})};return(0,f.jsx)(P.Z5,{onDragEnd:ek,children:(0,f.jsx)(o.Z,{display:"flex",flexDirection:"column",gap:120,padding:32,children:(0,f.jsxs)(o.Z,{gap:24,display:"flex",flexDirection:"column",width:"100%",children:[(0,f.jsx)(o.Z,{display:"flex",justifyContent:"end",alignItems:"center",gap:8,children:(0,f.jsx)(d.Z,{width:80,size:"xs",variants:"primary",onClick:eR,children:"수정 완료"})}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{required:!0,children:"제목"}),(0,f.jsx)(D.Z,{value:a,setValue:function(e){return c(e.target.value)}})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{required:!0,children:"부위"}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"start",gap:8,children:[(0,f.jsx)(w.Z,{size:"sm",list:_.or,value:x,setValue:p,label:"대분류"}),(0,f.jsx)(w.Z,{size:"sm",disabled:!x,list:(null==x?void 0:x.id)==="UPPER_BODY"?_.pz:_.KH,value:m,setValue:v,label:"중분류"})]})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{caption:"＊효과1 선택필수",children:"효과"}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"start",gap:8,children:[(0,f.jsx)(w.Z,{size:"sm",list:_.sA,value:N,setValue:U,label:"효과1"}),(0,f.jsx)(w.Z,{size:"sm",list:_.sA,value:V,setValue:A,label:"효과2"}),(0,f.jsx)(w.Z,{size:"sm",list:_.sA,value:B,setValue:M,label:"효과3"})]})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{required:!0,children:"이미지"}),e_&&(0,f.jsx)(P.bK,{droppableId:"post-image-modify",children:function(e){return(0,f.jsx)(q,S(S({ref:e.innerRef},e.droppableProps),{},{onDragEnd:ek,children:eD&&eD.length>0&&eD.map(function(e,t){return(0,f.jsx)(L.Z,{imageUrl:e,idx:t,setImageFormatData:eb,setPreviewFile:eO},"upload-img-".concat(e))})}))}}),(0,f.jsxs)(o.Z,{width:80,children:[(0,f.jsx)(z,{htmlFor:"image-upload",children:"+추가"}),(0,f.jsx)("input",{type:"file",ref:en,id:"image-upload",onChange:function(e){var t=new FormData;t.append("file",e.target.files[0]);var n=new FileReader;n.readAsDataURL(e.target.files[0]),n.onload=function(){return eO(function(e){return[].concat((0,Z.Z)(e),[n.result])})},eb(function(e){return[].concat((0,Z.Z)(e),[t])})},style:{display:"none"}})]})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",height:"100%",children:[(0,f.jsx)(I.Z,{required:!0,children:"스트레칭 방법 및 순서"}),(0,f.jsx)(o.Z,{border:" 1px solid ".concat(s.O.g000),display:"flex",flexDirection:"column",borderRadius:8,overflow:"hidden",gap:1,backgroundColor:s.O.g000,children:er.map(function(e){return(0,f.jsx)(O.Z,{order:e.order,deleteMode:el,onClickDelete:eS,children:(0,f.jsx)(D.Z,{value:e.detail,setValue:function(t){return es(function(n){return n.map(function(n){return n.order===e.order?S(S({},n),{},{detail:t.target.value}):n})})},invisible:!0})},"stretching-oreder-".concat(e.order))})}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"row",justifyContent:"start",gap:4,children:[!el&&(0,f.jsx)(o.Z,{width:80,children:(0,f.jsx)(d.Z,{size:"xs",variants:"secondary",onClick:function(){return es(function(e){return[].concat((0,Z.Z)(e),[{order:e.at(-1).order+1,detail:""}])})},children:"+추가"})}),(0,f.jsx)(o.Z,{width:80,children:(0,f.jsx)(d.Z,{size:"xs",variants:"primary",onClick:function(){if(eo(function(e){return!e}),el&&er.length>1){var e=(0,Z.Z)(er).filter(function(e){return e.order!==(0,Z.Z)(ed).filter(function(t){return t===e.order})[0]});e.map(function(e,t){return e.order=t+1}),es((0,Z.Z)(e))}},children:el?"확인":"삭제"})})]})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{required:!0,children:"권장 횟수"}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,f.jsx)(o.Z,{width:120,children:(0,f.jsx)(D.Z,{value:Y,setValue:J})}),(0,f.jsx)(l.Z,{variants:"body1",children:"회"})]}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,f.jsx)(o.Z,{width:120,children:(0,f.jsx)(D.Z,{value:Q,setValue:$})}),(0,f.jsx)(l.Z,{variants:"body1",children:"세트"})]})]})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{children:"주의할 점"}),eh.length>0&&(0,f.jsx)(o.Z,{border:" 1px solid ".concat(s.O.g000),display:"flex",flexDirection:"column",borderRadius:8,overflow:"hidden",gap:1,backgroundColor:s.O.g000,children:eh.map(function(e){return(0,f.jsx)(O.Z,{order:e.order,deleteMode:eg,onClickDelete:eN,children:(0,f.jsx)(D.Z,{value:e.detail,setValue:function(t){return ex(function(n){return n.map(function(n){return n.order===e.order?S(S({},n),{},{detail:t.target.value}):n})})},invisible:!0})},"caution-oreder-".concat(e.order))})}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"row",justifyContent:"start",gap:4,children:[!eg&&(0,f.jsx)(o.Z,{width:80,children:(0,f.jsx)(d.Z,{size:"xs",variants:"secondary",onClick:function(){return ex(function(e){return[].concat((0,Z.Z)(e),[{order:e.at(-1)?e.at(-1).order+1:1,detail:""}])})},children:"+추가"})}),(0,f.jsx)(o.Z,{width:80,children:(0,f.jsx)(d.Z,{size:"xs",variants:"primary",onClick:function(){if(ej(function(e){return!e}),eg){var e=(0,Z.Z)(eh).filter(function(e){return e.order!==(0,Z.Z)(ey).filter(function(t){return t===e.order})[0]});e.map(function(e,t){return e.order=t+1}),ex((0,Z.Z)(e))}},children:eg?"확인":"삭제"})})]}),(0,f.jsxs)(o.Z,{display:"flex",flexDirection:"column",gap:16,justifyContent:"start",width:"100%",children:[(0,f.jsx)(I.Z,{children:"참고영상 링크"}),(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:8,children:[(0,f.jsx)(b.eR7,{}),(0,f.jsx)(o.Z,{width:"100%",children:(0,f.jsx)(D.Z,{value:K,setValue:function(e){return H(e.target.value)}})})]})]})]})]})})})},q=r.ZP.div.withConfig({displayName:"stretchingModifyView__DropBox",componentId:"sc-15ngmbi-0"})(["display:grid;grid-template-columns:repeat(2,350px);gap:16px;"]),z=r.ZP.label.withConfig({displayName:"stretchingModifyView__ImageUploadButton",componentId:"sc-15ngmbi-1"})(["display:flex;justify-content:center;align-items:center;height:32px;width:80px;font-size:12px;color:",";border:2px solid ",";border-radius:8px;font-weight:700;"],s.O.vividPrimaryColor,s.O.vividPrimaryColor),U=n(7848),F=function(e){var t=e.listId;return(0,U.a)({queryFn:function(){return fetch("/api/stretchings/".concat(t)).then(function(e){return e.json()})},queryKey:["stretching","detail",t],enabled:!!t,onError:function(e){console.log(e)}}).data},V=function(){var e=(0,u.useRouter)();return(0,E.D)({mutationFn:function(e){return fetch("/api/stretchings/".concat(e),{method:"DELETE"})},onSuccess:function(){e.push("/stretching")},onError:function(e){console.log(e)}})},A=function(){var e=(0,i.useState)(!1),t=e[0],n=e[1],r=(0,u.useRouter)(),s=r.query.id?"string"==typeof r.query.id?r.query.id:r.query.id[0]:void 0,h=F({listId:s}),x=V().mutate;return(0,f.jsxs)(T,{children:[(0,f.jsx)(c.Z,{}),(0,f.jsxs)(B,{children:[(0,f.jsx)(a.Z,{children:(0,f.jsxs)(M,{children:[(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"start",alignItems:"center",gap:4,height:32,children:[(0,f.jsx)(l.Z,{variants:"heading2",children:"스트레칭"}),(0,f.jsx)(l.Z,{variants:"heading2",children:">"}),(0,f.jsx)(l.Z,{variants:"heading2",children:"상세"})]}),!t&&(0,f.jsx)(o.Z,{width:80,children:(0,f.jsx)(d.Z,{size:"xs",variants:"secondary",onClick:function(){return r.push("/stretching")},children:"목록 >"})})]})}),!t&&(0,f.jsxs)(o.Z,{display:"flex",justifyContent:"end",alignItems:"center",gap:8,children:[(0,f.jsx)(d.Z,{width:80,size:"xs",variants:t?"primary":"secondary",onClick:function(){return n(function(e){return!e})},children:"수정"}),(0,f.jsx)(d.Z,{width:80,size:"xs",variants:"primary",onClick:function(){confirm("정말로 삭제하시겠습니까?")&&s&&x(s)},children:"삭제"})]}),(0,f.jsx)(a.Z,{children:t?(0,f.jsx)(N,{data:h}):(0,f.jsx)(f.Fragment,{children:h?(0,f.jsx)(j,{data:h}):(0,f.jsx)(l.Z,{children:"결과를 불러오지 못하였습니다."})})})]})]})},T=r.ZP.div.withConfig({displayName:"detail__PageWrapper",componentId:"sc-1sfml4u-0"})(["display:flex;background-color:",";height:100%;"],s.O.f100),B=r.ZP.div.withConfig({displayName:"detail__ContentWrapper",componentId:"sc-1sfml4u-1"})(["padding:16px;width:100%;height:100%;display:flex;flex-direction:column;gap:32px;"]),M=r.ZP.div.withConfig({displayName:"detail__BreadCrumb",componentId:"sc-1sfml4u-2"})(["display:flex;justify-content:space-between;align-items:center;gap:8px;padding:16px 16px 16px 32px;"])},4535:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stretching/detail",function(){return n(3311)}])}},function(e){e.O(0,[228,617,630,170,915,848,518,774,888,179],function(){return e(e.s=4535)}),_N_E=e.O()}]);